<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

body {
    min-height: 100vh;
    background: linear-gradient(135deg, #667eea, #764ba2);
    padding: 20px;
    transition: 0.4s;
}

body.dark {
    background: #121212;
}

.container {
    max-width: 1200px;
    margin: auto;
}

/* Header */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(15px);
    padding: 20px 30px;
    border-radius: 15px;
    color: white;
    margin-bottom: 30px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
}

.header-left h2 {
    margin-bottom: 5px;
}

.header-left p {
    font-size: 14px;
    opacity: 0.9;
}

.header-right {
    display: flex;
    gap: 15px;
}

.toggle-btn, .logout-btn {
    padding: 8px 16px;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.3s;
}

.toggle-btn {
    background: rgba(255,255,255,0.3);
    color: white;
}

.toggle-btn:hover {
    background: rgba(255,255,255,0.5);
}

.logout-btn {
    background: #e74c3c;
    color: white;
}

.logout-btn:hover {
    background: #c0392b;
}

/* Navigation Tabs */
.nav-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(15px);
    padding: 15px;
    border-radius: 15px;
}

.nav-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: rgba(255,255,255,0.1);
    color: white;
    cursor: pointer;
    transition: 0.3s;
    font-weight: 600;
}

.nav-btn.active {
    background: #667eea;
    transform: scale(1.05);
}

.nav-btn:hover {
    background: rgba(255,255,255,0.2);
}

/* Grid Layout */
.content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

/* Card Styles */
.card {
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(15px);
    padding: 20px;
    border-radius: 15px;
    color: white;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    transition: 0.3s;
}

.card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.2);
}

.card h3 {
    margin-bottom: 12px;
    font-size: 18px;
}

.card p {
    font-size: 14px;
    line-height: 1.6;
    opacity: 0.9;
}

.card-badge {
    display: inline-block;
    margin-top: 10px;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.badge-pending {
    background: #f39c12;
    color: white;
}

.badge-submitted {
    background: #27ae60;
    color: white;
}

.badge-overdue {
    background: #e74c3c;
    color: white;
}

/* Form Section */
.form-section {
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(15px);
    padding: 30px;
    border-radius: 15px;
    color: white;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 8px;
    background: rgba(255,255,255,0.2);
    color: white;
    font-family: 'Poppins', sans-serif;
}

.form-group input::placeholder,
.form-group textarea::placeholder {
    color: rgba(255,255,255,0.7);
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
    outline: none;
    background: rgba(255,255,255,0.3);
    box-shadow: 0 0 10px rgba(255,255,255,0.2);
}

/* File Upload */
.file-upload {
    position: relative;
    display: inline-block;
    width: 100%;
}

.file-input {
    display: none;
}

.file-label {
    display: block;
    padding: 30px;
    border: 2px dashed rgba(255,255,255,0.5);
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    transition: 0.3s;
    background: rgba(255,255,255,0.05);
}

.file-label:hover {
    border-color: rgba(255,255,255,0.8);
    background: rgba(255,255,255,0.1);
}

.file-name {
    margin-top: 10px;
    font-size: 14px;
    color: #2ecc71;
}

/* Buttons */
.btn {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.3s;
    width: 100%;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

.btn-secondary {
    background: #2ecc71;
    color: white;
}

.btn-secondary:hover {
    background: #27ae60;
}

.btn-danger {
    background: #e74c3c;
    color: white;
}

.btn-danger:hover {
    background: #c0392b;
}

/* Status Messages */
.message {
    padding: 15px;
    border-radius: 8px;
    margin-top: 15px;
    font-weight: 600;
}

.message.success {
    background: rgba(46, 204, 113, 0.3);
    color: #2ecc71;
    border: 1px solid #2ecc71;
}

.message.error {
    background: rgba(231, 76, 60, 0.3);
    color: #e74c3c;
    border: 1px solid #e74c3c;
}

.message.info {
    background: rgba(52, 152, 219, 0.3);
    color: #3498db;
    border: 1px solid #3498db;
}

/* Submission List */
.submission-item {
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 15px;
    border-left: 4px solid #667eea;
}

.submission-item p {
    margin: 8px 0;
    font-size: 14px;
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
}

.modal.show {
    display: flex;
}

.modal-content {
    background: linear-gradient(135deg, #667eea, #764ba2);
    padding: 30px;
    border-radius: 15px;
    max-width: 500px;
    width: 90%;
    color: white;
    position: relative;
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
}

.hidden {
    display: none;
}

</style>
</head>
<body>

<div class="container">

    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <h2 id="welcomeText"></h2>
            <p id="departmentText"></p>
        </div>
        <div class="header-right">
            <button class="toggle-btn" onclick="toggleTheme()">üåô Toggle Theme</button>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
        <button class="nav-btn active" onclick="showTab('assignments')">üìö Assignments</button>
        <button class="nav-btn" onclick="showTab('submissions')">üì§ My Submissions</button>
        <button class="nav-btn" onclick="showTab('submit')">‚úèÔ∏è Submit Assignment</button>
        <button class="nav-btn" onclick="showTab('quizzes')">üß™ Quizzes</button>
    </div>

    <!-- Tab Content -->

    <!-- 1. Assignments Tab -->
    <div id="assignments" class="tab-content">
        <div class="content-grid" id="assignmentsList"></div>
    </div>

    <!-- 2. My Submissions Tab -->
    <div id="submissions" class="tab-content hidden">
        <div id="submissionsList"></div>
    </div>

    <!-- 3. Submit Assignment Tab -->
    <div id="submit" class="tab-content hidden">
        <div class="form-section">
            <h2>üìù Submit Assignment</h2>
            
            <div class="form-group">
                <label>Select Assignment</label>
                <select id="assignmentSelect">
                    <option value="">-- Choose Assignment --</option>
                </select>
            </div>

            <div class="form-group">
                <label>Assignment Details</label>
                <textarea id="assignmentDetails" readonly placeholder="Assignment details will appear here..."></textarea>
            </div>

            <div class="form-group">
                <label>Upload File</label>
                <div class="file-upload">
                    <input type="file" id="submissionFile" class="file-input" accept=".pdf,.doc,.docx,.txt,.zip,.jpg,.png">
                    <label for="submissionFile" class="file-label">
                        üìÅ Click to upload or drag and drop<br>
                        <small>PDF, DOC, DOCX, TXT, ZIP, JPG, PNG</small>
                        <div class="file-name" id="fileName"></div>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label>Comments (Optional)</label>
                <textarea id="submissionComments" placeholder="Add any comments about your submission..."></textarea>
            </div>

            <button class="btn btn-secondary" onclick="submitAssignment()">üì§ Submit Assignment</button>
            <div id="submitMsg"></div>
        </div>
    </div>

    <!-- 4. Quizzes Tab -->
    <div id="quizzes" class="tab-content hidden">
        <div id="quizzesContent"></div>
    </div>

</div>

<script>

// ===== CHECK LOGIN =====
const student = JSON.parse(localStorage.getItem("student"));

if (!student) {
    window.location.href = "student.html";
}

// Display student info
document.getElementById("welcomeText").innerText = "Welcome, " + student.name + " üëã";
document.getElementById("departmentText").innerText = "üìö " + student.department + " Department | ID: " + student.id.substring(0, 8) + "...";

// ===== TAB NAVIGATION =====
function showTab(tabName) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.add('hidden');
    });

    // Show selected tab
    document.getElementById(tabName).classList.remove('hidden');

    // Update button active state
    document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');

    // Load data based on tab
    if (tabName === 'assignments') loadAssignments();
    else if (tabName === 'submissions') loadMySubmissions();
    else if (tabName === 'submit') populateAssignmentSelect();
}

// ===== LOAD ASSIGNMENTS =====
async function loadAssignments() {
    try {
        const res = await fetch("http://localhost:5000/faculty/assignments");
        const data = await res.json();

        const container = document.getElementById("assignmentsList");
        container.innerHTML = "";

        if (data.length === 0) {
            container.innerHTML = '<p style="color: white; grid-column: 1/-1;">No assignments available yet.</p>';
            return;
        }

        data.forEach(assign => {
            const deadline = new Date(assign.deadline);
            const now = new Date();
            const isOverdue = deadline < now;
            const daysLeft = Math.ceil((deadline - now) / (1000 * 60 * 60 * 24));

            container.innerHTML += `
                <div class="card">
                    <h3>üìã ${assign.title}</h3>
                    <p>${assign.description}</p>
                    <p><strong>Created by:</strong> ${assign.createdBy}</p>
                    <p><strong>Deadline:</strong> ${deadline.toLocaleDateString()} ${deadline.toLocaleTimeString()}</p>
                    <div class="card-badge ${isOverdue ? 'badge-overdue' : 'badge-pending'}">
                        ${isOverdue ? '‚è∞ OVERDUE' : '‚è≥ ' + daysLeft + ' days left'}
                    </div>
                    <button class="btn btn-primary" style="margin-top: 15px;" onclick="selectAssignment('${assign._id}', '${assign.title}')">
                        üì§ Submit Now
                    </button>
                </div>
            `;
        });
    } catch (error) {
        console.error(error);
        document.getElementById("assignmentsList").innerHTML = '<p style="color: red;">Error loading assignments</p>';
    }
}

// ===== SELECT ASSIGNMENT FOR SUBMISSION =====
function selectAssignment(id, title) {
    document.getElementById('assignmentSelect').value = id;
    document.querySelector('input[type="file"]').value = '';
    document.getElementById('fileName').innerText = '';
    showTab('submit');
    loadAssignmentDetails(id);
}

// ===== POPULATE ASSIGNMENT SELECT =====
async function populateAssignmentSelect() {
    try {
        const res = await fetch("http://localhost:5000/faculty/assignments");
        const data = await res.json();

        const select = document.getElementById("assignmentSelect");
        select.innerHTML = '<option value="">-- Choose Assignment --</option>';

        data.forEach(assign => {
            const option = document.createElement('option');
            option.value = assign._id;
            option.text = assign.title;
            select.appendChild(option);
        });

        // Add event listener to show details
        select.addEventListener('change', function() {
            if (this.value) {
                loadAssignmentDetails(this.value);
            } else {
                document.getElementById('assignmentDetails').value = '';
            }
        });
    } catch (error) {
        console.error(error);
    }
}

// ===== LOAD ASSIGNMENT DETAILS =====
async function loadAssignmentDetails(id) {
    try {
        const res = await fetch("http://localhost:5000/faculty/assignments");
        const data = await res.json();
        const assignment = data.find(a => a._id === id);

        if (assignment) {
            const deadline = new Date(assignment.deadline);
            document.getElementById('assignmentDetails').value = 
                `Title: ${assignment.title}\n\nDescription: ${assignment.description}\n\nDeadline: ${deadline.toLocaleDateString()} ${deadline.toLocaleTimeString()}\n\nCreated by: ${assignment.createdBy}`;
        }
    } catch (error) {
        console.error(error);
    }
}

// ===== FILE UPLOAD HANDLING =====
const fileInput = document.getElementById('submissionFile');
fileInput.addEventListener('change', function() {
    if (this.files.length > 0) {
        document.getElementById('fileName').innerText = '‚úÖ ' + this.files[0].name + ' (' + (this.files[0].size / 1024).toFixed(2) + ' KB)';
    }
});

// ===== SUBMIT ASSIGNMENT =====
async function submitAssignment() {
    const assignmentId = document.getElementById("assignmentSelect").value;
    const file = document.getElementById("submissionFile").files[0];
    const comments = document.getElementById("submissionComments").value;
    const msgDiv = document.getElementById("submitMsg");

    if (!assignmentId) {
        showMessage(msgDiv, "Please select an assignment", "error");
        return;
    }

    if (!file && !comments) {
        showMessage(msgDiv, "Please upload a file or add comments", "error");
        return;
    }

    // Create FormData for file upload
    const formData = new FormData();
    formData.append("studentId", student.id);
    formData.append("assignmentId", assignmentId);
    if (file) formData.append("file", file);
    formData.append("content", comments || "File submission");

    try {
        const res = await fetch("http://localhost:5000/student/submit-assignment", {
            method: "POST",
            body: formData
        });

        const data = await res.json();

        if (res.ok) {
            showMessage(msgDiv, "‚úÖ " + data.message, "success");
            document.getElementById("submissionFile").value = '';
            document.getElementById("submissionComments").value = '';
            document.getElementById('fileName').innerText = '';
            document.getElementById("assignmentSelect").value = '';
            setTimeout(() => {
                document.querySelector('.nav-btn:nth-child(2)').click();
            }, 1500);
        } else {
            showMessage(msgDiv, "‚ùå " + (data.message || "Submission failed"), "error");
        }
    } catch (error) {
        console.error(error);
        showMessage(msgDiv, "‚ùå Error: " + error.message, "error");
    }
}

// ===== LOAD MY SUBMISSIONS =====
async function loadMySubmissions() {
    try {
        const res = await fetch(`http://localhost:5000/student/submissions/${student.id}`);
        
        if (res.status === 404) {
            document.getElementById('submissionsList').innerHTML = '<p style="color: white; text-align: center;">No submissions yet</p>';
            return;
        }

        const data = await res.json();
        const container = document.getElementById('submissionsList');
        container.innerHTML = '';

        if (Array.isArray(data) && data.length > 0) {
            data.forEach(sub => {
                container.innerHTML += `
                    <div class="submission-item">
                        <p><strong>üìã Assignment:</strong> ${sub.assignmentId?.title || 'Unknown'}</p>
                        <p><strong>üì§ Status:</strong> ${sub.status}</p>
                        <p><strong>üìÖ Submitted:</strong> ${new Date(sub.submissionDate).toLocaleDateString()}</p>
                        <p><strong>üí¨ Content:</strong> ${sub.content}</p>
                    </div>
                `;
            });
        } else {
            container.innerHTML = '<p style="color: white;">No submissions yet</p>';
        }
    } catch (error) {
        console.error(error);
        document.getElementById('submissionsList').innerHTML = '<p style="color: red;">Unable to load submissions</p>';
    }
}

// ===== SHOW MESSAGE =====
function showMessage(element, message, type) {
    element.className = 'message ' + type;
    element.innerText = message;
}

// ===== LOGOUT =====
function logout() {
    localStorage.removeItem("student");
    window.location.href = "student.html";
}

// ===== THEME TOGGLE =====
function toggleTheme() {
    document.body.classList.toggle("dark");
}

// ===== QUIZZES FUNCTIONALITY =====
document.getElementById('quizzes-tab')?.addEventListener('click', loadQuizzes);

function loadQuizzes() {
    fetch('http://localhost:5000/quizzes')
        .then(res => res.json())
        .then(data => {
            if (data.success && data.quizzes.length > 0) {
                let html = '<h2>üß™ Available Quizzes</h2><div class="quizzes-container">';
                data.quizzes.forEach(quiz => {
                    const date = new Date(quiz.createdAt).toLocaleDateString();
                    html += `
                        <div class="quiz-card">
                            <div class="quiz-header">
                                <h3>${quiz.title}</h3>
                                <span class="quiz-points">${quiz.totalPoints} pts</span>
                            </div>
                            <p class="quiz-desc">${quiz.description}</p>
                            <div class="quiz-meta">
                                <span>üìã ${quiz.questions.length} questions</span>
                                <span>‚è±Ô∏è ${quiz.timeLimit} min</span>
                                <span>üìÖ ${date}</span>
                            </div>
                            <button class="btn btn-primary" onclick="startQuiz('${quiz._id}')">Start Quiz ‚Üí</button>
                        </div>
                    `;
                });
                html += '</div>';
                document.getElementById('quizzesContent').innerHTML = html;
            } else {
                document.getElementById('quizzesContent').innerHTML = '<p class="info-msg">No quizzes available yet.</p>';
            }
        })
        .catch(err => console.error('Error loading quizzes:', err));
}

function startQuiz(quizId) {
    fetch(`http://localhost:5000/quiz/${quizId}`)
        .then(res => res.json())
        .then(data => {
            if (data.success) {
                displayQuiz(data.quiz);
            } else {
                alert('Error loading quiz');
            }
        })
        .catch(err => console.error('Error:', err));
}

let currentQuiz = null;
let quizAnswers = {};
let quizTimer = null;
let timeRemaining = 0;

function displayQuiz(quiz) {
    currentQuiz = quiz;
    quizAnswers = {};
    
    // Initialize answers object
    quiz.questions.forEach((q, idx) => {
        quizAnswers[idx] = null;
    });

    const timeLimit = quiz.timeLimit * 60; // Convert to seconds
    timeRemaining = timeLimit;

    let html = `
        <div class="quiz-container">
            <div class="quiz-header-bar">
                <div class="quiz-title">${quiz.title}</div>
                <div class="quiz-timer">
                    <span id="timer">‚è±Ô∏è ${timeLimit}s</span>
                    <button class="btn btn-danger" onclick="submitQuiz()">Submit Quiz</button>
                </div>
            </div>

            <div class="quiz-questions">
    `;

    quiz.questions.forEach((question, index) => {
        html += `
            <div class="question-block">
                <h4>Q${index + 1}. ${question.question} <span class="points">(${question.points} pts)</span></h4>
                <div class="options">
        `;
        question.options.forEach((option, optIndex) => {
            html += `
                <label class="option-label">
                    <input type="radio" name="q${index}" value="${optIndex}" onchange="quizAnswers[${index}] = ${optIndex}">
                    <span>${option}</span>
                </label>
            `;
        });
        html += `
                </div>
            </div>
        `;
    });

    html += `
            </div>
            <div class="quiz-info">Total Points: ${quiz.totalPoints}</div>
        </div>
    `;

    document.getElementById('quizzesContent').innerHTML = html;

    // Start timer
    startQuizTimer(timeLimit);
}

function startQuizTimer(seconds) {
    if (quizTimer) clearInterval(quizTimer);
    timeRemaining = seconds;

    quizTimer = setInterval(() => {
        timeRemaining--;
        const mins = Math.floor(timeRemaining / 60);
        const secs = timeRemaining % 60;
        document.getElementById('timer').textContent = `‚è±Ô∏è ${mins}:${secs < 10 ? '0' : ''}${secs}`;

        if (timeRemaining <= 0) {
            clearInterval(quizTimer);
            submitQuiz(true); // Auto-submit on timeout
        }
    }, 1000);
}

function submitQuiz(autoSubmit = false) {
    if (!currentQuiz) return;
    if (quizTimer) clearInterval(quizTimer);

    const studentEmail = localStorage.getItem('email');
    if (!studentEmail) {
        alert('Please login first');
        return;
    }

    // Prepare answers for submission
    const answers = [];
    currentQuiz.questions.forEach((question, index) => {
        answers.push({
            questionIndex: index,
            selectedAnswer: quizAnswers[index] !== null ? quizAnswers[index] : -1
        });
    });

    fetch('http://localhost:5000/student/submit-quiz', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            studentEmail: studentEmail,
            quizId: currentQuiz._id,
            answers: answers
        })
    })
    .then(res => res.json())
    .then(data => {
        if (data.success) {
            showQuizResults(data);
        } else {
            alert('Error submitting quiz: ' + data.message);
        }
    })
    .catch(err => {
        console.error('Error:', err);
        alert('Error submitting quiz');
    });
}

function showQuizResults(result) {
    const attempt = result.attempt;
    const percentage = Math.round(attempt.percentage);
    const status = percentage >= 50 ? 'PASSED ‚úÖ' : 'FAILED ‚ùå';

    let html = `
        <div class="quiz-results">
            <div class="results-header">
                <h2>üìä Quiz Results</h2>
                <p>Thank you for taking the quiz!</p>
            </div>

            <div class="results-score">
                <div class="score-circle" style="width: 150px; height: 150px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 48px; font-weight: bold;">
                    ${percentage}%
                </div>
                <div class="score-details">
                    <h3>${status}</h3>
                    <p>Score: <strong>${attempt.totalScore} / ${currentQuiz.totalPoints}</strong></p>
                    <p>Submission Time: ${new Date(attempt.submissionTime).toLocaleString()}</p>
                </div>
            </div>

            <div class="results-breakdown" style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h3>Answer Breakdown:</h3>
                <div class="answers-list">
    `;

    attempt.answers.forEach((answer, idx) => {
        const question = currentQuiz.questions[idx];
        const isCorrect = answer.isCorrect;
        const selectedOption = answer.selectedAnswer >= 0 ? question.options[answer.selectedAnswer] : 'Not answered';
        const correctOption = question.options[question.correctAnswer];

        html += `
            <div class="answer-review" style="padding: 15px; border-left: 4px solid ${isCorrect ? '#4caf50' : '#f44336'}; background: ${isCorrect ? '#e8f5e9' : '#ffebee'}; border-radius: 4px; margin: 10px 0;">
                <strong>Q${idx + 1}: ${question.question}</strong>
                <p>Your Answer: ${selectedOption} ${isCorrect ? '‚úÖ' : '‚ùå'}</p>
                ${!isCorrect ? `<p>Correct Answer: ${correctOption}</p>` : ''}
                <p style="font-size: 12px; color: #666;">Points: ${answer.pointsEarned}/${question.points}</p>
            </div>
        `;
    });

    html += `
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="goBackToQuizzes()">‚Üê Back to Quizzes</button>
            </div>
        </div>
    `;

    document.getElementById('quizzesContent').innerHTML = html;
}

function goBackToQuizzes() {
    loadQuizzes();
}

// ===== ADD QUIZ STYLES =====
const quizStyles = document.createElement('style');
quizStyles.innerHTML = `
    .quizzes-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .quiz-card {
        background: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
    }

    .quiz-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .quiz-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 10px;
    }

    .quiz-header h3 {
        margin: 0;
        flex: 1;
        color: #333;
    }

    .quiz-points {
        background: #667eea;
        color: white;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: bold;
        white-space: nowrap;
    }

    .quiz-desc {
        color: #666;
        margin: 10px 0;
        font-size: 14px;
    }

    .quiz-meta {
        display: flex;
        gap: 15px;
        margin: 10px 0;
        font-size: 13px;
        color: #888;
        flex-wrap: wrap;
    }

    .quiz-container {
        background: white;
        border-radius: 8px;
        overflow: hidden;
    }

    .quiz-header-bar {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .quiz-title {
        font-size: 24px;
        font-weight: bold;
    }

    .quiz-timer {
        display: flex;
        gap: 15px;
        align-items: center;
        font-size: 18px;
        font-weight: bold;
    }

    .quiz-questions {
        padding: 30px;
        max-height: calc(100vh - 300px);
        overflow-y: auto;
    }

    .question-block {
        margin-bottom: 30px;
        padding: 15px;
        background: #f9f9f9;
        border-radius: 8px;
    }

    .question-block h4 {
        margin: 0 0 15px 0;
        color: #333;
        font-size: 16px;
    }

    .points {
        background: #fff3cd;
        color: #856404;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: bold;
    }

    .options {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .option-label {
        display: flex;
        align-items: center;
        padding: 10px;
        background: white;
        border: 1px solid #ddd;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .option-label:hover {
        background: #f0f0f0;
        border-color: #667eea;
    }

    .option-label input[type="radio"] {
        margin-right: 10px;
        cursor: pointer;
    }

    .option-label input[type="radio"]:checked + span {
        font-weight: bold;
        color: #667eea;
    }

    .quiz-info {
        background: #f5f5f5;
        padding: 15px 30px;
        text-align: right;
        font-weight: bold;
        color: #333;
    }

    .quiz-results {
        padding: 20px;
        background: #f5f5f5;
        border-radius: 8px;
    }

    .results-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .results-score {
        display: flex;
        gap: 30px;
        margin: 30px 0;
        align-items: center;
        background: white;
        padding: 20px;
        border-radius: 8px;
    }

    .score-details h3 {
        margin: 0;
        font-size: 24px;
    }

    .results-breakdown {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
    }

    .answers-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 15px;
    }

    .info-msg {
        text-align: center;
        padding: 40px;
        background: rgba(255,255,255,0.1);
        color: white;
        border-radius: 8px;
        font-size: 16px;
    }
`;
document.head.appendChild(quizStyles);

// ===== INITIAL LOAD =====
loadAssignments();

</script>

</body>
</html>

